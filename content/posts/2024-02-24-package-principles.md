---
title: "How to Package Code: The Forgotten Principles"
meta-description: "A forgotten set of design principles for how to package software and thus do software design at a sets-of-classes scale."
---

![A person with a torch discovering ancient writing. In the style of classic adventure movies. Generated by GPT-4 and Dall-E 3](assets/package-principles/header.webp)

In 2000, Robert C. Martin[^bob-criticism] published a paper called _Design Principles and Design Patterns_. In it, he described a set of "Principles of Object Oriented Class Design", which today are widely known by the name coined for them in 2004 by Michael Feathers: the SOLID principles.

These principles have since become a cornerstone of software design and architecture. They are taught in universities, bootcamps, and on the job. They are the subject of countless blog posts, conference talks, and books.

However, _Design Principles and Design Patterns_ doesn't end at the SOLID principles. It also contains a section on "Principles of Package Architecture". These principles scale the ideas behind SOLID up from a level of methods an classes to _sets_ of classes, which people may call modules or packages.

These principles of larger-scale design are as important for larger code bases as are the SOLID principles, yet they aren't widely known or communicated. Let's fix that. This post is a summary of the Package Principles from the original SOLID paper.

## Package Principles

Pull in different directions - cohesion vs coupling, but also within the categories. Help you make informed tradeoffs, but you will still have to make the tradeoff yourself

Some of the principles make more sense for statically compiled languages??? (Maybe)

### Package Cohesion Principles

#### The Release Reuse Equivalency Principle (REP)

> The granule of reuse is the granule of release.

- Good for users

#### The Common Closure Principle (CCP)

> Classes that change together, belong together.

- Good for maintainers
- pushes towards larger packages

#### The Common Reuse Principle (CRP)

> Classes that arenâ€™t reused together should not be grouped together.

(note the opposed perspective)

- Good for users
- pushes towards smaller packages

### Package Coupling Principles

#### The Acyclic Dependencies Principle (ADP)

> The dependencies betwen packages must not form cycles.

#### The Stable Dependencies Principle (SDP)

> Depend in the direction of stability.

- !Explain stability

#### The Stable Abstractions Principle (SAP)

> Stable packages should be abstract packages.

Martin defines abstractness metrics too, but in my opinion these are too specific and don't apply broadly across programming languages. I'd rather go with a more colloquial definition of abstractness - the less a package "knows" about concrete use cases, the more abstract it is.

These packages may be hard to modify (stability), but they should be easy to extend (abstractness).

## Notes

> Fortunately, packages are not fixed in stone. Indeed, it is the nature of packages to shift and jitter during the course of development. Early in a project, architects may set up the package structure such that CCP dominates and develoipment and maintenance is aided. Later, as the architecture stabilizes, the architects may refactor the package structure to maximize REP and CRP for the external reusers.

Expect and optimize for evolution of package boundaries over time. Make it easy.

## Further Reading

- SOLID
    - Wikipedia has [a good summary](https://en.wikipedia.org/wiki/SOLID)
    - See also [Sandi Metz' talk on the subject](https://www.youtube.com/watch?v=v-2yFMzxqwU)
- The Internet Archive's Wayback Machine is hosting a [full copy of the _Design Principles and Design Patterns_ paper](https://web.archive.org/web/20150906155800/http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf)

[^bob-criticism]: I have different views than Martin on many levels. But I know that people I disagree with on some things can still be right on on other things, and this article is about some of the things that I think he got right.
